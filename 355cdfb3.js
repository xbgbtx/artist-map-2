/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var t,e,n=function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};function i(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}function r(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,r,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return s}function s(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}!function(t){t.Start="xstate.start",t.Stop="xstate.stop",t.Raise="xstate.raise",t.Send="xstate.send",t.Cancel="xstate.cancel",t.NullEvent="",t.Assign="xstate.assign",t.After="xstate.after",t.DoneState="done.state",t.DoneInvoke="done.invoke",t.Log="xstate.log",t.Init="xstate.init",t.Invoke="xstate.invoke",t.ErrorExecution="error.execution",t.ErrorCommunication="error.communication",t.ErrorPlatform="error.platform",t.ErrorCustom="xstate.error",t.Update="xstate.update",t.Pure="xstate.pure",t.Choose="xstate.choose"}(t||(t={})),function(t){t.Parent="#_parent",t.Internal="#_internal"}(e||(e={}));var a=t.Start,c=t.Stop,l=t.Raise,h=t.Send,u=t.Cancel,d=t.NullEvent,f=t.Assign;t.After,t.DoneState;var v=t.Log,p=t.Init,y=t.Invoke;t.ErrorExecution,t.ErrorPlatform,t.ErrorCustom;var g,m=t.Update,_=t.Choose,S=t.Pure,b={};function $(t,e,n){void 0===n&&(n=".");var i=A(t,n),r=A(e,n);return B(r)?!!B(i)&&r===i:B(i)?i in r:Object.keys(i).every((function(t){return t in r&&$(i[t],r[t])}))}function x(t){try{return B(t)||"number"==typeof t?"".concat(t):t.type}catch(t){throw new Error("Events must be strings or objects with a string event.type property.")}}function w(t,e){try{return D(t)?t:t.toString().split(e)}catch(e){throw new Error("'".concat(t,"' is not a valid state path."))}}function A(t,e){return"object"==typeof(n=t)&&"value"in n&&"context"in n&&"event"in n&&"_event"in n?t.value:D(t)?E(t):"string"!=typeof t?t:E(w(t,e));var n}function E(t){if(1===t.length)return t[0];for(var e={},n=e,i=0;i<t.length-1;i++)i===t.length-2?n[t[i]]=t[i+1]:(n[t[i]]={},n=n[t[i]]);return e}function O(t,e){for(var n={},i=Object.keys(t),r=0;r<i.length;r++){var o=i[r];n[o]=e(t[o],o,t,r)}return n}function k(t,e,n){var i,o,s={};try{for(var a=r(Object.keys(t)),c=a.next();!c.done;c=a.next()){var l=c.value,h=t[l];n(h)&&(s[l]=e(h,l,t))}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return s}var C=function(t){return function(e){var n,i,o=e;try{for(var s=r(t),a=s.next();!a.done;a=s.next()){o=o[a.value]}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return o}};function P(t){return t?B(t)?[[t]]:N(Object.keys(t).map((function(e){var n=t[e];return"string"==typeof n||n&&Object.keys(n).length?P(t[e]).map((function(t){return[e].concat(t)})):[[e]]}))):[[]]}function N(t){var e;return(e=[]).concat.apply(e,s([],o(t),!1))}function j(t){return D(t)?t:[t]}function T(t){return void 0===t?[]:j(t)}function U(t,e,n){var i,o;if(I(t))return t(e,n.data);var s={};try{for(var a=r(Object.keys(t)),c=a.next();!c.done;c=a.next()){var l=c.value,h=t[l];I(h)?s[l]=h(e,n.data):s[l]=h}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}return s}function R(t,e){var n,i,s=o([[],[]],2),a=s[0],c=s[1];try{for(var l=r(t),h=l.next();!h.done;h=l.next()){var u=h.value;e(u)?a.push(u):c.push(u)}}catch(t){n={error:t}}finally{try{h&&!h.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return[a,c]}function M(t,e){return O(t.states,(function(t,n){if(t){var i=(B(e)?void 0:e[n])||(t?t.current:void 0);if(i)return{current:i,states:M(t,i)}}}))}function H(t,e,n,i){V(!!t,"Attempting to update undefined context");var o=t?n.reduce((function(t,n){var o,s,a=n.assignment,c={state:i,action:n,_event:e},l={};if(I(a))l=a(t,e.data,c);else try{for(var h=r(Object.keys(a)),u=h.next();!u.done;u=h.next()){var d=u.value,f=a[d];l[d]=I(f)?f(t,e.data,c):f}}catch(t){o={error:t}}finally{try{u&&!u.done&&(s=h.return)&&s.call(h)}finally{if(o)throw o.error}}return Object.assign({},t,l)}),t):t;return o}var V=function(){};function D(t){return Array.isArray(t)}function I(t){return"function"==typeof t}function B(t){return"string"==typeof t}function L(t,e){if(t)return B(t)?{type:"xstate.guard",name:t,predicate:e?e[t]:void 0}:I(t)?{type:"xstate.guard",name:t.name,predicate:t}:t}V=function(t,e){var n=t instanceof Error?t:void 0;if((n||!t)&&void 0!==console){var i=["Warning: ".concat(e)];n&&i.push(n),console.warn.apply(console,i)}};var z=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function F(t){return!!t&&"__xstatenode"in t}function J(t,e){return B(t)||"number"==typeof t?n({type:t},e):t}function W(t,e){if(!B(t)&&"$$type"in t&&"scxml"===t.$$type)return t;var i=J(t);return n({name:i.type,data:i,$$type:"scxml",type:"external"},e)}function q(t,e){return j(e).map((function(e){return void 0===e||"string"==typeof e||F(e)?{target:e,event:t}:n(n({},e),{event:t})}))}function K(t,e,n,i,r){var o=t.options.guards,s={state:r,cond:e,_event:i};if("xstate.guard"===e.type)return((null==o?void 0:o[e.name])||e.predicate)(n,i.data,s);var a=null==o?void 0:o[e.type];if(!a)throw new Error("Guard '".concat(e.type,"' is not implemented on machine '").concat(t.id,"'."));return a(n,i.data,s)}function Z(t,e){return"".concat(t,":invocation[").concat(e,"]")}(g={})[z]=function(){return this},g[Symbol.observable]=function(){return this};var G=W({type:p});function Q(t,e){return e&&e[t]||void 0}function X(t,e){var i;if(B(t)||"number"==typeof t)i=I(r=Q(t,e))?{type:t,exec:r}:r||{type:t,exec:void 0};else if(I(t))i={type:t.name||t.toString(),exec:t};else{var r;if(I(r=Q(t.type,e)))i=n(n({},t),{exec:r});else if(r){var o=r.type||t.type;i=n(n(n({},r),t),{type:o})}else i=t}return i}var Y=function(t,e){return t?(D(t)?t:[t]).map((function(t){return X(t,e)})):[]};function tt(t){var e=X(t);return n(n({id:B(t)?t:e.id},e),{type:e.type})}function et(t){return B(t)?{type:l,event:t}:nt(t,{to:e.Internal})}function nt(t,e){return{to:e?e.to:void 0,type:h,event:I(t)?t:J(t),delay:e?e.delay:void 0,id:e&&void 0!==e.id?e.id:I(t)?t.name:x(t)}}function it(e,n){var i="".concat(t.DoneState,".").concat(e),r={type:i,data:n,toString:function(){return i}};return r}function rt(e,i,r,a,u,d){void 0===d&&(d=!1);var p=o(d?[[],u]:R(u,(function(t){return t.type===f})),2),y=p[0],g=p[1],m=y.length?H(r,a,y,i):r,b=d?[r]:void 0,$=N(g.map((function(r){var u;switch(r.type){case l:return{type:l,_event:W(r.event)};case h:var p=function(t,e,i,r){var o,s={_event:i},a=W(I(t.event)?t.event(e,i.data,s):t.event);if(B(t.delay)){var c=r&&r[t.delay];o=I(c)?c(e,i.data,s):c}else o=I(t.delay)?t.delay(e,i.data,s):t.delay;var l=I(t.to)?t.to(e,i.data,s):t.to;return n(n({},t),{to:l,_event:a,event:a.data,delay:o})}(r,m,a,e.options.delays);return V(!B(r.delay)||"number"==typeof p.delay,"No delay reference for delay expression '".concat(r.delay,"' was found on machine '").concat(e.id,"'")),p;case v:return function(t,e,i){return n(n({},t),{value:B(t.expr)?t.expr:t.expr(e,i.data,{_event:i})})}(r,m,a);case _:if(!(x=null===(u=r.conds.find((function(t){var n=L(t.cond,e.options.guards);return!n||K(e,n,m,a,i)})))||void 0===u?void 0:u.actions))return[];var y=o(rt(e,i,m,a,Y(T(x),e.options.actions),d),2),g=y[0],$=y[1];return m=$,null==b||b.push(m),g;case S:var x;if(!(x=r.get(m,a.data)))return[];var w=o(rt(e,i,m,a,Y(T(x),e.options.actions),d),2),A=w[0],E=w[1];return m=E,null==b||b.push(m),A;case c:return function(e,n,i){var r=I(e.activity)?e.activity(n,i.data):e.activity,o="string"==typeof r?{id:r}:r;return{type:t.Stop,activity:o}}(r,m,a);case f:m=H(m,a,[r],i),null==b||b.push(m);break;default:var O=X(r,e.options.actions),k=O.exec;if(k&&b){var C=b.length-1;O=n(n({},O),{exec:function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];k.apply(void 0,s([b[C]],o(e),!1))}})}return O}})).filter((function(t){return!!t})));return[$,m]}function ot(t){var e;return(e={id:t,send:function(){},subscribe:function(){return{unsubscribe:function(){}}},getSnapshot:function(){},toJSON:function(){return{id:t}}})[z]=function(){return this},e}function st(t,e,n,i){var r,o,s="string"==typeof(o=t.src)?{type:o}:o,a=null===(r=null==e?void 0:e.options.services)||void 0===r?void 0:r[s.type],c=t.data?U(t.data,n,i):void 0,l=a?function(t,e,n){var i=ot(e);if(i.deferred=!0,F(t)){var r=i.state=function(){return(n?t.withContext(n):t).initialState}(void 0);i.getSnapshot=function(){return r}}return i}(a,t.id,c):ot(t.id);return l.meta=t,l}var at=function(t){return"atomic"===t.type||"final"===t.type};function ct(t){return Object.keys(t.states).map((function(e){return t.states[e]})).filter((function(t){return"history"!==t.type}))}function lt(t){var e=[t];return at(t)?e:e.concat(N(ct(t).map(lt)))}function ht(t,e){var n,i,o,s,a,c,l,h,u=dt(new Set(t)),d=new Set(e);try{for(var f=r(d),v=f.next();!v.done;v=f.next())for(var p=(w=v.value).parent;p&&!d.has(p);)d.add(p),p=p.parent}catch(t){n={error:t}}finally{try{v&&!v.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}var y=dt(d);try{for(var g=r(d),m=g.next();!m.done;m=g.next()){if("compound"!==(w=m.value).type||y.get(w)&&y.get(w).length){if("parallel"===w.type)try{for(var _=(a=void 0,r(ct(w))),S=_.next();!S.done;S=_.next()){var b=S.value;d.has(b)||(d.add(b),u.get(b)?u.get(b).forEach((function(t){return d.add(t)})):b.initialStateNodes.forEach((function(t){return d.add(t)})))}}catch(t){a={error:t}}finally{try{S&&!S.done&&(c=_.return)&&c.call(_)}finally{if(a)throw a.error}}}else u.get(w)?u.get(w).forEach((function(t){return d.add(t)})):w.initialStateNodes.forEach((function(t){return d.add(t)}))}}catch(t){o={error:t}}finally{try{m&&!m.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}try{for(var $=r(d),x=$.next();!x.done;x=$.next()){var w;for(p=(w=x.value).parent;p&&!d.has(p);)d.add(p),p=p.parent}}catch(t){l={error:t}}finally{try{x&&!x.done&&(h=$.return)&&h.call($)}finally{if(l)throw l.error}}return d}function ut(t,e){var n=e.get(t);if(!n)return{};if("compound"===t.type){var i=n[0];if(!i)return{};if(at(i))return i.key}var r={};return n.forEach((function(t){r[t.key]=ut(t,e)})),r}function dt(t){var e,n,i=new Map;try{for(var o=r(t),s=o.next();!s.done;s=o.next()){var a=s.value;i.has(a)||i.set(a,[]),a.parent&&(i.has(a.parent)||i.set(a.parent,[]),i.get(a.parent).push(a))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return i}function ft(t,e){return ut(t,dt(ht([t],e)))}function vt(t,e){return Array.isArray(t)?t.some((function(t){return t===e})):t instanceof Set&&t.has(e)}function pt(t,e){return"compound"===e.type?ct(e).some((function(e){return"final"===e.type&&vt(t,e)})):"parallel"===e.type&&ct(e).every((function(e){return pt(t,e)}))}function yt(t){return new Set(N(t.map((function(t){return t.tags}))))}function gt(t,e){if(t===e)return!0;if(void 0===t||void 0===e)return!1;if(B(t)||B(e))return t===e;var n=Object.keys(t),i=Object.keys(e);return n.length===i.length&&n.every((function(n){return gt(t[n],e[n])}))}var mt=function(){function t(t){var e,n,i=this;this.actions=[],this.activities=b,this.meta={},this.events=[],this.value=t.value,this.context=t.context,this._event=t._event,this._sessionid=t._sessionid,this.event=this._event.data,this.historyValue=t.historyValue,this.history=t.history,this.actions=t.actions||[],this.activities=t.activities||b,this.meta=(void 0===(n=t.configuration)&&(n=[]),n.reduce((function(t,e){return void 0!==e.meta&&(t[e.id]=e.meta),t}),{})),this.events=t.events||[],this.matches=this.matches.bind(this),this.toStrings=this.toStrings.bind(this),this.configuration=t.configuration,this.transitions=t.transitions,this.children=t.children,this.done=!!t.done,this.tags=null!==(e=Array.isArray(t.tags)?new Set(t.tags):t.tags)&&void 0!==e?e:new Set,this.machine=t.machine,Object.defineProperty(this,"nextEvents",{get:function(){return function(t){return s([],o(new Set(N(s([],o(t.map((function(t){return t.ownEvents}))),!1)))),!1)}(i.configuration)}})}return t.from=function(e,n){return e instanceof t?e.context!==n?new t({value:e.value,context:n,_event:e._event,_sessionid:null,historyValue:e.historyValue,history:e.history,actions:[],activities:e.activities,meta:{},events:[],configuration:[],transitions:[],children:{}}):e:new t({value:e,context:n,_event:G,_sessionid:null,historyValue:void 0,history:void 0,actions:[],activities:void 0,meta:void 0,events:[],configuration:[],transitions:[],children:{}})},t.create=function(e){return new t(e)},t.inert=function(e,n){if(e instanceof t){if(!e.actions.length)return e;var i=G;return new t({value:e.value,context:n,_event:i,_sessionid:null,historyValue:e.historyValue,history:e.history,activities:e.activities,configuration:e.configuration,transitions:[],children:{}})}return t.from(e,n)},t.prototype.toStrings=function(t,e){var n=this;if(void 0===t&&(t=this.value),void 0===e&&(e="."),B(t))return[t];var i=Object.keys(t);return i.concat.apply(i,s([],o(i.map((function(i){return n.toStrings(t[i],e).map((function(t){return i+e+t}))}))),!1))},t.prototype.toJSON=function(){var t=this;t.configuration,t.transitions;var e=t.tags;t.machine;var r=i(t,["configuration","transitions","tags","machine"]);return n(n({},r),{tags:Array.from(e)})},t.prototype.matches=function(t){return $(t,this.value)},t.prototype.hasTag=function(t){return this.tags.has(t)},t.prototype.can=function(t){var e,n=null===(e=this.machine)||void 0===e?void 0:e.getTransitionData(this,t);return!!(null==n?void 0:n.transitions.length)&&n.transitions.some((function(t){return void 0!==t.target||t.actions.length}))},t}();function _t(t){if("string"==typeof t){var e={type:t,toString:function(){return t}};return e}return t}function St(t){return n(n({type:y},t),{toJSON:function(){t.onDone,t.onError;var e=i(t,["onDone","onError"]);return n(n({},e),{type:y,src:_t(t.src)})}})}var bt={},$t=function(t){return"#"===t[0]},xt=function(){function f(t,e,i,a){var c,l=this;void 0===i&&(i="context"in t?t.context:void 0),this.config=t,this._context=i,this.order=-1,this.__xstatenode=!0,this.__cache={events:void 0,relativeValue:new Map,initialStateValue:void 0,initialState:void 0,on:void 0,transitions:void 0,candidates:{},delayedTransitions:void 0},this.idMap={},this.tags=[],this.options=Object.assign({actions:{},guards:{},services:{},activities:{},delays:{}},e),this.parent=null==a?void 0:a.parent,this.key=this.config.key||(null==a?void 0:a.key)||this.config.id||"(machine)",this.machine=this.parent?this.parent.machine:this,this.path=this.parent?this.parent.path.concat(this.key):[],this.delimiter=this.config.delimiter||(this.parent?this.parent.delimiter:"."),this.id=this.config.id||s([this.machine.key],o(this.path),!1).join(this.delimiter),this.version=this.parent?this.parent.version:this.config.version,this.type=this.config.type||(this.config.parallel?"parallel":this.config.states&&Object.keys(this.config.states).length?"compound":this.config.history?"history":"atomic"),this.schema=this.parent?this.machine.schema:null!==(c=this.config.schema)&&void 0!==c?c:{},this.description=this.config.description,V(!("parallel"in this.config),'The "parallel" property is deprecated and will be removed in version 4.1. '.concat(this.config.parallel?"Replace with `type: 'parallel'`":"Use `type: '".concat(this.type,"'`")," in the config for state node '").concat(this.id,"' instead.")),this.initial=this.config.initial,this.states=this.config.states?O(this.config.states,(function(t,e){var i,r=new f(t,{},void 0,{parent:l,key:e});return Object.assign(l.idMap,n(((i={})[r.id]=r,i),r.idMap)),r})):bt;var h=0;!function t(e){var n,i;e.order=h++;try{for(var o=r(ct(e)),s=o.next();!s.done;s=o.next()){t(s.value)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}}(this),this.history=!0===this.config.history?"shallow":this.config.history||!1,this._transient=!!this.config.always||!!this.config.on&&(Array.isArray(this.config.on)?this.config.on.some((function(t){return""===t.event})):""in this.config.on),this.strict=!!this.config.strict,this.onEntry=T(this.config.entry||this.config.onEntry).map((function(t){return X(t)})),this.onExit=T(this.config.exit||this.config.onExit).map((function(t){return X(t)})),this.meta=this.config.meta,this.doneData="final"===this.type?this.config.data:void 0,this.invoke=T(this.config.invoke).map((function(t,e){var i,r;if(F(t)){var o=Z(l.id,e);return l.machine.options.services=n(((i={})[o]=t,i),l.machine.options.services),St({src:o,id:o})}if(B(t.src)){o=t.id||Z(l.id,e);return St(n(n({},t),{id:o,src:t.src}))}if(F(t.src)||I(t.src)){o=t.id||Z(l.id,e);return l.machine.options.services=n(((r={})[o]=t.src,r),l.machine.options.services),St(n(n({id:o},t),{src:o}))}var s=t.src;return St(n(n({id:Z(l.id,e)},t),{src:s}))})),this.activities=T(this.config.activities).concat(this.invoke).map((function(t){return tt(t)})),this.transition=this.transition.bind(this),this.tags=T(this.config.tags)}return f.prototype._init=function(){this.__cache.transitions||lt(this).forEach((function(t){return t.on}))},f.prototype.withConfig=function(t,e){var i=this.options,r=i.actions,o=i.activities,s=i.guards,a=i.services,c=i.delays;return new f(this.config,{actions:n(n({},r),t.actions),activities:n(n({},o),t.activities),guards:n(n({},s),t.guards),services:n(n({},a),t.services),delays:n(n({},c),t.delays)},null!=e?e:this.context)},f.prototype.withContext=function(t){return new f(this.config,this.options,t)},Object.defineProperty(f.prototype,"context",{get:function(){return I(this._context)?this._context():this._context},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"definition",{get:function(){return{id:this.id,key:this.key,version:this.version,context:this.context,type:this.type,initial:this.initial,history:this.history,states:O(this.states,(function(t){return t.definition})),on:this.on,transitions:this.transitions,entry:this.onEntry,exit:this.onExit,activities:this.activities||[],meta:this.meta,order:this.order||-1,data:this.doneData,invoke:this.invoke,description:this.description,tags:this.tags}},enumerable:!1,configurable:!0}),f.prototype.toJSON=function(){return this.definition},Object.defineProperty(f.prototype,"on",{get:function(){if(this.__cache.on)return this.__cache.on;var t=this.transitions;return this.__cache.on=t.reduce((function(t,e){return t[e.eventType]=t[e.eventType]||[],t[e.eventType].push(e),t}),{})},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"after",{get:function(){return this.__cache.delayedTransitions||(this.__cache.delayedTransitions=this.getDelayedTransitions(),this.__cache.delayedTransitions)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"transitions",{get:function(){return this.__cache.transitions||(this.__cache.transitions=this.formatTransitions(),this.__cache.transitions)},enumerable:!1,configurable:!0}),f.prototype.getCandidates=function(t){if(this.__cache.candidates[t])return this.__cache.candidates[t];var e=""===t,n=this.transitions.filter((function(n){var i=n.eventType===t;return e?i:i||"*"===n.eventType}));return this.__cache.candidates[t]=n,n},f.prototype.getDelayedTransitions=function(){var e=this,i=this.config.after;if(!i)return[];var r=function(n,i){var r=function(e,n){var i=n?"#".concat(n):"";return"".concat(t.After,"(").concat(e,")").concat(i)}(I(n)?"".concat(e.id,":delay[").concat(i,"]"):n,e.id);return e.onEntry.push(nt(r,{delay:n})),e.onExit.push({type:u,sendId:r}),r},o=D(i)?i.map((function(t,e){var i=r(t.delay,e);return n(n({},t),{event:i})})):N(Object.keys(i).map((function(t,e){var o=i[t],s=B(o)?{target:o}:o,a=isNaN(+t)?t:+t,c=r(a,e);return T(s).map((function(t){return n(n({},t),{event:c,delay:a})}))})));return o.map((function(t){var i=t.delay;return n(n({},e.formatTransition(t)),{delay:i})}))},f.prototype.getStateNodes=function(t){var e,n=this;if(!t)return[];var i=t instanceof mt?t.value:A(t,this.delimiter);if(B(i)){var r=this.getStateNode(i).initial;return void 0!==r?this.getStateNodes(((e={})[i]=r,e)):[this,this.states[i]]}var a=Object.keys(i),c=[this];return c.push.apply(c,s([],o(N(a.map((function(t){return n.getStateNode(t).getStateNodes(i[t])})))),!1)),c},f.prototype.handles=function(t){var e=x(t);return this.events.includes(e)},f.prototype.resolveState=function(t){var e=t instanceof mt?t:mt.create(t),i=Array.from(ht([],this.getStateNodes(e.value)));return new mt(n(n({},e),{value:this.resolve(e.value),configuration:i,done:pt(i,this),tags:yt(i),machine:this.machine}))},f.prototype.transitionLeafNode=function(t,e,n){var i=this.getStateNode(t).next(e,n);return i&&i.transitions.length?i:this.next(e,n)},f.prototype.transitionCompoundNode=function(t,e,n){var i=Object.keys(t),r=this.getStateNode(i[0])._transition(t[i[0]],e,n);return r&&r.transitions.length?r:this.next(e,n)},f.prototype.transitionParallelNode=function(t,e,n){var i,o,s={};try{for(var a=r(Object.keys(t)),c=a.next();!c.done;c=a.next()){var l=c.value,h=t[l];if(h){var u=this.getStateNode(l)._transition(h,e,n);u&&(s[l]=u)}}}catch(t){i={error:t}}finally{try{c&&!c.done&&(o=a.return)&&o.call(a)}finally{if(i)throw i.error}}var d=Object.keys(s).map((function(t){return s[t]})),f=N(d.map((function(t){return t.transitions})));if(!d.some((function(t){return t.transitions.length>0})))return this.next(e,n);var v=N(d.map((function(t){return t.entrySet}))),p=N(Object.keys(s).map((function(t){return s[t].configuration})));return{transitions:f,entrySet:v,exitSet:N(d.map((function(t){return t.exitSet}))),configuration:p,source:e,actions:N(Object.keys(s).map((function(t){return s[t].actions})))}},f.prototype._transition=function(t,e,n){return B(t)?this.transitionLeafNode(t,e,n):1===Object.keys(t).length?this.transitionCompoundNode(t,e,n):this.transitionParallelNode(t,e,n)},f.prototype.getTransitionData=function(t,e){return this._transition(t.value,t,W(e))},f.prototype.next=function(t,e){var n,i,a,c=this,l=e.name,h=[],u=[];try{for(var d=r(this.getCandidates(l)),f=d.next();!f.done;f=d.next()){var v=f.value,p=v.cond,y=v.in,g=t.context,m=!y||(B(y)&&$t(y)?t.matches(A(this.getStateNodeById(y).path,this.delimiter)):$(A(y,this.delimiter),C(this.path.slice(0,-2))(t.value))),_=!1;try{_=!p||K(this.machine,p,g,e,t)}catch(t){throw new Error("Unable to evaluate guard '".concat(p.name||p.type,"' in transition for event '").concat(l,"' in state node '").concat(this.id,"':\n").concat(t.message))}if(_&&m){void 0!==v.target&&(u=v.target),h.push.apply(h,s([],o(v.actions),!1)),a=v;break}}}catch(t){n={error:t}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}if(a){if(!u.length)return{transitions:[a],entrySet:[],exitSet:[],configuration:t.value?[this]:[],source:t,actions:h};var S=N(u.map((function(e){return c.getRelativeStateNodes(e,t.historyValue)}))),b=!!a.internal,x=b?[]:N(S.map((function(t){return c.nodesFromChild(t)})));return{transitions:[a],entrySet:x,exitSet:b?[]:[this],configuration:S,source:t,actions:h}}},f.prototype.nodesFromChild=function(t){if(t.escapes(this))return[];for(var e=[],n=t;n&&n!==this;)e.push(n),n=n.parent;return e.push(this),e},f.prototype.escapes=function(t){if(this===t)return!1;for(var e=this.parent;e;){if(e===t)return!1;e=e.parent}return!0},f.prototype.getActions=function(e,n,i,a){var c,l,h,u,d=ht([],a?this.getStateNodes(a.value):[this]),f=e.configuration.length?ht(d,e.configuration):d;try{for(var v=r(f),p=v.next();!p.done;p=v.next()){vt(d,m=p.value)||e.entrySet.push(m)}}catch(t){c={error:t}}finally{try{p&&!p.done&&(l=v.return)&&l.call(v)}finally{if(c)throw c.error}}try{for(var y=r(d),g=y.next();!g.done;g=y.next()){var m;vt(f,m=g.value)&&!vt(e.exitSet,m.parent)||e.exitSet.push(m)}}catch(t){h={error:t}}finally{try{g&&!g.done&&(u=y.return)&&u.call(y)}finally{if(h)throw h.error}}var _=N(e.entrySet.map((function(t){var r=[];if("final"!==t.type)return r;var o=t.parent;if(!o.parent)return r;r.push(it(t.id,t.doneData),it(o.id,t.doneData?U(t.doneData,n,i):void 0));var s=o.parent;return"parallel"===s.type&&ct(s).every((function(t){return pt(e.configuration,t)}))&&r.push(it(s.id)),r})));e.exitSet.sort((function(t,e){return e.order-t.order})),e.entrySet.sort((function(t,e){return t.order-e.order}));var S=new Set(e.entrySet),b=new Set(e.exitSet),$=o([N(Array.from(S).map((function(e){return s(s([],o(e.activities.map((function(e){return function(e){var n=tt(e);return{type:t.Start,activity:n,exec:void 0}}(e)}))),!1),o(e.onEntry),!1)}))).concat(_.map(et)),N(Array.from(b).map((function(e){return s(s([],o(e.onExit),!1),o(e.activities.map((function(e){return function(e){var n=I(e)?e:tt(e);return{type:t.Stop,activity:n,exec:void 0}}(e)}))),!1)})))],2),x=$[0],w=$[1];return Y(w.concat(e.actions).concat(x),this.machine.options.actions)},f.prototype.transition=function(t,e,n){void 0===t&&(t=this.initialState);var i,r,a=W(e);if(t instanceof mt)i=void 0===n?t:this.resolveState(mt.from(t,n));else{var c=B(t)?this.resolve(E(this.getResolvedPath(t))):this.resolve(t),l=null!=n?n:this.machine.context;i=this.resolveState(mt.from(c,l))}if("*"===a.name)throw new Error("An event cannot have the wildcard type ('".concat("*","')"));if(this.strict&&!this.events.includes(a.name)&&(r=a.name,!/^(done|error)\./.test(r)))throw new Error("Machine '".concat(this.id,"' does not accept event '").concat(a.name,"'"));var h=this._transition(i.value,i,a)||{transitions:[],configuration:[],entrySet:[],exitSet:[],source:i,actions:[]},u=ht([],this.getStateNodes(i.value)),d=h.configuration.length?ht(u,h.configuration):u;return h.configuration=s([],o(d),!1),this.resolveTransition(h,i,i.context,a)},f.prototype.resolveRaisedTransition=function(t,e,n){var i,r=t.actions;return(t=this.transition(t,e))._event=n,t.event=n.data,(i=t.actions).unshift.apply(i,s([],o(r),!1)),t},f.prototype.resolveTransition=function(t,i,s,u){var f,v,p=this;void 0===u&&(u=G);var g=t.configuration,_=!i||t.transitions.length>0,S=_?ft(this.machine,g):void 0,b=i?i.historyValue?i.historyValue:t.source?this.machine.historyValue(i.value):void 0:void 0,$=this.getActions(t,s,u,i),x=i?n({},i.activities):{};try{for(var w=r($),A=w.next();!A.done;A=w.next()){var E=A.value;E.type===a?x[E.activity.id||E.activity.type]=E:E.type===c&&(x[E.activity.id||E.activity.type]=!1)}}catch(t){f={error:t}}finally{try{A&&!A.done&&(v=w.return)&&v.call(w)}finally{if(f)throw f.error}}var O,k,C=o(rt(this,i,s,u,$,this.machine.config.preserveActionOrder),2),P=C[0],N=C[1],j=o(R(P,(function(t){return t.type===l||t.type===h&&t.to===e.Internal})),2),T=j[0],U=j[1],H=P.filter((function(t){var e;return t.type===a&&(null===(e=t.activity)||void 0===e?void 0:e.type)===y})),V=H.reduce((function(t,e){return t[e.activity.id]=st(e.activity,p.machine,N,u),t}),i?n({},i.children):{}),D=_?t.configuration:i?i.configuration:[],I=pt(D,this),B=new mt({value:S||i.value,context:N,_event:u,_sessionid:i?i._sessionid:null,historyValue:S?b?(O=b,k=S,{current:k,states:M(O,k)}):void 0:i?i.historyValue:void 0,history:!S||t.source?i:void 0,actions:S?U:[],activities:S?x:i?i.activities:{},events:[],configuration:D,transitions:t.transitions,children:V,done:I,tags:yt(D),machine:this}),L=s!==N;B.changed=u.name===m||L;var z=B.history;z&&delete z.history;var F=!I&&(this._transient||g.some((function(t){return t._transient})));if(!(_||F&&""!==u.name))return B;var J=B;if(!I)for(F&&(J=this.resolveRaisedTransition(J,{type:d},u));T.length;){var W=T.shift();J=this.resolveRaisedTransition(J,W._event,u)}var q=J.changed||(z?!!J.actions.length||L||typeof z.value!=typeof J.value||!gt(J.value,z.value):void 0);return J.changed=q,J.history=z,J},f.prototype.getStateNode=function(t){if($t(t))return this.machine.getStateNodeById(t);if(!this.states)throw new Error("Unable to retrieve child state '".concat(t,"' from '").concat(this.id,"'; no child states exist."));var e=this.states[t];if(!e)throw new Error("Child state '".concat(t,"' does not exist on '").concat(this.id,"'"));return e},f.prototype.getStateNodeById=function(t){var e=$t(t)?t.slice("#".length):t;if(e===this.id)return this;var n=this.machine.idMap[e];if(!n)throw new Error("Child state node '#".concat(e,"' does not exist on machine '").concat(this.id,"'"));return n},f.prototype.getStateNodeByPath=function(t){if("string"==typeof t&&$t(t))try{return this.getStateNodeById(t.slice(1))}catch(t){}for(var e=w(t,this.delimiter).slice(),n=this;e.length;){var i=e.shift();if(!i.length)break;n=n.getStateNode(i)}return n},f.prototype.resolve=function(t){var e,n=this;if(!t)return this.initialStateValue||bt;switch(this.type){case"parallel":return O(this.initialStateValue,(function(e,i){return e?n.getStateNode(i).resolve(t[i]||e):bt}));case"compound":if(B(t)){var i=this.getStateNode(t);return"parallel"===i.type||"compound"===i.type?((e={})[t]=i.initialStateValue,e):t}return Object.keys(t).length?O(t,(function(t,e){return t?n.getStateNode(e).resolve(t):bt})):this.initialStateValue||{};default:return t||bt}},f.prototype.getResolvedPath=function(t){if($t(t)){var e=this.machine.idMap[t.slice("#".length)];if(!e)throw new Error("Unable to find state node '".concat(t,"'"));return e.path}return w(t,this.delimiter)},Object.defineProperty(f.prototype,"initialStateValue",{get:function(){var t,e;if(this.__cache.initialStateValue)return this.__cache.initialStateValue;if("parallel"===this.type)e=k(this.states,(function(t){return t.initialStateValue||bt}),(function(t){return!("history"===t.type)}));else if(void 0!==this.initial){if(!this.states[this.initial])throw new Error("Initial state '".concat(this.initial,"' not found on '").concat(this.key,"'"));e=at(this.states[this.initial])?this.initial:((t={})[this.initial]=this.states[this.initial].initialStateValue,t)}else e={};return this.__cache.initialStateValue=e,this.__cache.initialStateValue},enumerable:!1,configurable:!0}),f.prototype.getInitialState=function(t,e){this._init();var n=this.getStateNodes(t);return this.resolveTransition({configuration:n,entrySet:n,exitSet:[],transitions:[],source:void 0,actions:[]},void 0,null!=e?e:this.machine.context,void 0)},Object.defineProperty(f.prototype,"initialState",{get:function(){var t=this.initialStateValue;if(!t)throw new Error("Cannot retrieve initial state from simple state '".concat(this.id,"'."));return this.getInitialState(t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"target",{get:function(){var t;if("history"===this.type){var e=this.config;t=B(e.target)&&$t(e.target)?E(this.machine.getStateNodeById(e.target).path.slice(this.path.length-1)):e.target}return t},enumerable:!1,configurable:!0}),f.prototype.getRelativeStateNodes=function(t,e,n){return void 0===n&&(n=!0),n?"history"===t.type?t.resolveHistory(e):t.initialStateNodes:[t]},Object.defineProperty(f.prototype,"initialStateNodes",{get:function(){var t=this;return at(this)?[this]:"compound"!==this.type||this.initial?N(P(this.initialStateValue).map((function(e){return t.getFromRelativePath(e)}))):(V(!1,"Compound state node '".concat(this.id,"' has no initial state.")),[this])},enumerable:!1,configurable:!0}),f.prototype.getFromRelativePath=function(t){if(!t.length)return[this];var e=o(t),n=e[0],i=e.slice(1);if(!this.states)throw new Error("Cannot retrieve subPath '".concat(n,"' from node with no states"));var r=this.getStateNode(n);if("history"===r.type)return r.resolveHistory();if(!this.states[n])throw new Error("Child state '".concat(n,"' does not exist on '").concat(this.id,"'"));return this.states[n].getFromRelativePath(i)},f.prototype.historyValue=function(t){if(Object.keys(this.states).length)return{current:t||this.initialStateValue,states:k(this.states,(function(e,n){if(!t)return e.historyValue();var i=B(t)?void 0:t[n];return e.historyValue(i||e.initialStateValue)}),(function(t){return!t.history}))}},f.prototype.resolveHistory=function(t){var e=this;if("history"!==this.type)return[this];var n=this.parent;if(!t){var i=this.target;return i?N(P(i).map((function(t){return n.getFromRelativePath(t)}))):n.initialStateNodes}var o,s,a=(o=n.path,s="states",function(t){var e,n,i=t;try{for(var a=r(o),c=a.next();!c.done;c=a.next()){var l=c.value;i=i[s][l]}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return i})(t).current;return B(a)?[n.getStateNode(a)]:N(P(a).map((function(t){return"deep"===e.history?n.getFromRelativePath(t):[n.states[t[0]]]})))},Object.defineProperty(f.prototype,"stateIds",{get:function(){var t=this,e=N(Object.keys(this.states).map((function(e){return t.states[e].stateIds})));return[this.id].concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"events",{get:function(){var t,e,n,i;if(this.__cache.events)return this.__cache.events;var o=this.states,s=new Set(this.ownEvents);if(o)try{for(var a=r(Object.keys(o)),c=a.next();!c.done;c=a.next()){var l=o[c.value];if(l.states)try{for(var h=(n=void 0,r(l.events)),u=h.next();!u.done;u=h.next()){var d=u.value;s.add("".concat(d))}}catch(t){n={error:t}}finally{try{u&&!u.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{c&&!c.done&&(e=a.return)&&e.call(a)}finally{if(t)throw t.error}}return this.__cache.events=Array.from(s)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"ownEvents",{get:function(){var t=new Set(this.transitions.filter((function(t){return!(!t.target&&!t.actions.length&&t.internal)})).map((function(t){return t.eventType})));return Array.from(t)},enumerable:!1,configurable:!0}),f.prototype.resolveTarget=function(t){var e=this;if(void 0!==t)return t.map((function(t){if(!B(t))return t;var n=t[0]===e.delimiter;if(n&&!e.parent)return e.getStateNodeByPath(t.slice(1));var i=n?e.key+t:t;if(!e.parent)return e.getStateNodeByPath(i);try{return e.parent.getStateNodeByPath(i)}catch(t){throw new Error("Invalid transition definition for state node '".concat(e.id,"':\n").concat(t.message))}}))},f.prototype.formatTransition=function(t){var e=this,i=function(t){if(void 0!==t&&""!==t)return T(t)}(t.target),r="internal"in t?t.internal:!i||i.some((function(t){return B(t)&&t[0]===e.delimiter})),o=this.machine.options.guards,s=this.resolveTarget(i),a=n(n({},t),{actions:Y(T(t.actions)),cond:L(t.cond,o),target:s,source:this,internal:r,eventType:t.event,toJSON:function(){return n(n({},a),{target:a.target?a.target.map((function(t){return"#".concat(t.id)})):void 0,source:"#".concat(e.id)})}});return a},f.prototype.formatTransitions=function(){var e,n,a,c=this;if(this.config.on)if(Array.isArray(this.config.on))a=this.config.on;else{var l=this.config.on,h="*",u=l[h],d=void 0===u?[]:u,f=i(l,["*"]);a=N(Object.keys(f).map((function(t){""===t&&V(!1,"Empty string transition configs (e.g., `{ on: { '': ... }}`) for transient transitions are deprecated. Specify the transition in the `{ always: ... }` property instead. "+'Please check the `on` configuration for "#'.concat(c.id,'".'));var e,n,i,r,o=q(t,f[t]);return e=c,n=t,i=o.slice(0,-1).some((function(t){return!("cond"in t)&&!("in"in t)&&(B(t.target)||F(t.target))})),r=""===n?"the transient event":"event '".concat(n,"'"),V(!i,"One or more transitions for ".concat(r," on state '").concat(e.id,"' are unreachable. ")+"Make sure that the default transition is the last one defined."),o})).concat(q("*",d)))}else a=[];var v=this.config.always?q("",this.config.always):[],p=this.config.onDone?q(String(it(this.id)),this.config.onDone):[];V(!(this.config.onDone&&!this.parent),'Root nodes cannot have an ".onDone" transition. Please check the config of "'.concat(this.id,'".'));var y=N(this.invoke.map((function(e){var n,i,r,a=[];return e.onDone&&a.push.apply(a,s([],o(q(String((n=e.id,{type:r="".concat(t.DoneInvoke,".").concat(n),data:i,toString:function(){return r}})),e.onDone)),!1)),e.onError&&a.push.apply(a,s([],o(q(String(function(e,n){var i="".concat(t.ErrorPlatform,".").concat(e);return{type:i,data:n,toString:function(){return i}}}(e.id)),e.onError)),!1)),a}))),g=this.after,m=N(s(s(s(s([],o(p),!1),o(y),!1),o(a),!1),o(v),!1).map((function(t){return T(t).map((function(t){return c.formatTransition(t)}))})));try{for(var _=r(g),S=_.next();!S.done;S=_.next()){var b=S.value;m.push(b)}}catch(t){e={error:t}}finally{try{S&&!S.done&&(n=_.return)&&n.call(_)}finally{if(e)throw e.error}}return m},f}();
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const wt=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,At=Symbol(),Et=new WeakMap;class Ot{constructor(t,e,n){if(this._$cssResult$=!0,n!==At)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const e=this.t;if(wt&&void 0===t){const n=void 0!==e&&1===e.length;n&&(t=Et.get(e)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),n&&Et.set(e,t))}return t}toString(){return this.cssText}}const kt=wt?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const n of t.cssRules)e+=n.cssText;return(t=>new Ot("string"==typeof t?t:t+"",void 0,At))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var Ct;const Pt=window.trustedTypes,Nt=Pt?Pt.emptyScript:"",jt=window.reactiveElementPolyfillSupport,Tt={toAttribute(t,e){switch(e){case Boolean:t=t?Nt:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let n=t;switch(e){case Boolean:n=null!==t;break;case Number:n=null===t?null:Number(t);break;case Object:case Array:try{n=JSON.parse(t)}catch(t){n=null}}return n}},Ut=(t,e)=>e!==t&&(e==e||t==t),Rt={attribute:!0,type:String,converter:Tt,reflect:!1,hasChanged:Ut};class Mt extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;null!==(e=this.h)&&void 0!==e||(this.h=[]),this.h.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,n)=>{const i=this._$Ep(n,e);void 0!==i&&(this._$Ev.set(i,n),t.push(i))})),t}static createProperty(t,e=Rt){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const n="symbol"==typeof t?Symbol():"__"+t,i=this.getPropertyDescriptor(t,n,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}}static getPropertyDescriptor(t,e,n){return{get(){return this[e]},set(i){const r=this[t];this[e]=i,this.requestUpdate(t,r,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||Rt}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const n of e)this.createProperty(n,t[n])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const n=new Set(t.flat(1/0).reverse());for(const t of n)e.unshift(kt(t))}else void 0!==t&&e.push(kt(t));return e}static _$Ep(t,e){const n=e.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,n;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(n=t.hostConnected)||void 0===n||n.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return((t,e)=>{wt?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const n=document.createElement("style"),i=window.litNonce;void 0!==i&&n.setAttribute("nonce",i),n.textContent=e.cssText,t.appendChild(n)}))})(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,n){this._$AK(t,n)}_$EO(t,e,n=Rt){var i,r;const o=this.constructor._$Ep(t,n);if(void 0!==o&&!0===n.reflect){const s=(null!==(r=null===(i=n.converter)||void 0===i?void 0:i.toAttribute)&&void 0!==r?r:Tt.toAttribute)(e,n.type);this._$El=t,null==s?this.removeAttribute(o):this.setAttribute(o,s),this._$El=null}}_$AK(t,e){var n,i;const r=this.constructor,o=r._$Ev.get(t);if(void 0!==o&&this._$El!==o){const t=r.getPropertyOptions(o),s=t.converter,a=null!==(i=null!==(n=null==s?void 0:s.fromAttribute)&&void 0!==n?n:"function"==typeof s?s:null)&&void 0!==i?i:Tt.fromAttribute;this._$El=o,this[o]=a(e,t.type),this._$El=null}}requestUpdate(t,e,n){let i=!0;void 0!==t&&(((n=n||this.constructor.getPropertyOptions(t)).hasChanged||Ut)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===n.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,n))):i=!1),!this.isUpdatePending&&i&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const n=this._$AL;try{e=this.shouldUpdate(n),e?(this.willUpdate(n),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(n)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(n)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var Ht;Mt.finalized=!0,Mt.elementProperties=new Map,Mt.elementStyles=[],Mt.shadowRootOptions={mode:"open"},null==jt||jt({ReactiveElement:Mt}),(null!==(Ct=globalThis.reactiveElementVersions)&&void 0!==Ct?Ct:globalThis.reactiveElementVersions=[]).push("1.3.3");const Vt=globalThis.trustedTypes,Dt=Vt?Vt.createPolicy("lit-html",{createHTML:t=>t}):void 0,It=`lit$${(Math.random()+"").slice(9)}$`,Bt="?"+It,Lt=`<${Bt}>`,zt=document,Ft=(t="")=>zt.createComment(t),Jt=t=>null===t||"object"!=typeof t&&"function"!=typeof t,Wt=Array.isArray,qt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Kt=/-->/g,Zt=/>/g,Gt=/>|[ 	\n\r](?:([^\s"'>=/]+)([ 	\n\r]*=[ 	\n\r]*(?:[^ 	\n\r"'`<>=]|("|')|))|$)/g,Qt=/'/g,Xt=/"/g,Yt=/^(?:script|style|textarea|title)$/i,te=(t=>(e,...n)=>({_$litType$:t,strings:e,values:n}))(1),ee=Symbol.for("lit-noChange"),ne=Symbol.for("lit-nothing"),ie=new WeakMap,re=zt.createTreeWalker(zt,129,null,!1),oe=(t,e)=>{const n=t.length-1,i=[];let r,o=2===e?"<svg>":"",s=qt;for(let e=0;e<n;e++){const n=t[e];let a,c,l=-1,h=0;for(;h<n.length&&(s.lastIndex=h,c=s.exec(n),null!==c);)h=s.lastIndex,s===qt?"!--"===c[1]?s=Kt:void 0!==c[1]?s=Zt:void 0!==c[2]?(Yt.test(c[2])&&(r=RegExp("</"+c[2],"g")),s=Gt):void 0!==c[3]&&(s=Gt):s===Gt?">"===c[0]?(s=null!=r?r:qt,l=-1):void 0===c[1]?l=-2:(l=s.lastIndex-c[2].length,a=c[1],s=void 0===c[3]?Gt:'"'===c[3]?Xt:Qt):s===Xt||s===Qt?s=Gt:s===Kt||s===Zt?s=qt:(s=Gt,r=void 0);const u=s===Gt&&t[e+1].startsWith("/>")?" ":"";o+=s===qt?n+Lt:l>=0?(i.push(a),n.slice(0,l)+"$lit$"+n.slice(l)+It+u):n+It+(-2===l?(i.push(void 0),e):u)}const a=o+(t[n]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==Dt?Dt.createHTML(a):a,i]};class se{constructor({strings:t,_$litType$:e},n){let i;this.parts=[];let r=0,o=0;const s=t.length-1,a=this.parts,[c,l]=oe(t,e);if(this.el=se.createElement(c,n),re.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(i=re.nextNode())&&a.length<s;){if(1===i.nodeType){if(i.hasAttributes()){const t=[];for(const e of i.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(It)){const n=l[o++];if(t.push(e),void 0!==n){const t=i.getAttribute(n.toLowerCase()+"$lit$").split(It),e=/([.?@])?(.*)/.exec(n);a.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?ue:"?"===e[1]?fe:"@"===e[1]?ve:he})}else a.push({type:6,index:r})}for(const e of t)i.removeAttribute(e)}if(Yt.test(i.tagName)){const t=i.textContent.split(It),e=t.length-1;if(e>0){i.textContent=Vt?Vt.emptyScript:"";for(let n=0;n<e;n++)i.append(t[n],Ft()),re.nextNode(),a.push({type:2,index:++r});i.append(t[e],Ft())}}}else if(8===i.nodeType)if(i.data===Bt)a.push({type:2,index:r});else{let t=-1;for(;-1!==(t=i.data.indexOf(It,t+1));)a.push({type:7,index:r}),t+=It.length-1}r++}}static createElement(t,e){const n=zt.createElement("template");return n.innerHTML=t,n}}function ae(t,e,n=t,i){var r,o,s,a;if(e===ee)return e;let c=void 0!==i?null===(r=n._$Cl)||void 0===r?void 0:r[i]:n._$Cu;const l=Jt(e)?void 0:e._$litDirective$;return(null==c?void 0:c.constructor)!==l&&(null===(o=null==c?void 0:c._$AO)||void 0===o||o.call(c,!1),void 0===l?c=void 0:(c=new l(t),c._$AT(t,n,i)),void 0!==i?(null!==(s=(a=n)._$Cl)&&void 0!==s?s:a._$Cl=[])[i]=c:n._$Cu=c),void 0!==c&&(e=ae(t,c._$AS(t,e.values),c,i)),e}class ce{constructor(t,e){this.v=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}p(t){var e;const{el:{content:n},parts:i}=this._$AD,r=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:zt).importNode(n,!0);re.currentNode=r;let o=re.nextNode(),s=0,a=0,c=i[0];for(;void 0!==c;){if(s===c.index){let e;2===c.type?e=new le(o,o.nextSibling,this,t):1===c.type?e=new c.ctor(o,c.name,c.strings,this,t):6===c.type&&(e=new pe(o,this,t)),this.v.push(e),c=i[++a]}s!==(null==c?void 0:c.index)&&(o=re.nextNode(),s++)}return r}m(t){let e=0;for(const n of this.v)void 0!==n&&(void 0!==n.strings?(n._$AI(t,n,e),e+=n.strings.length-2):n._$AI(t[e])),e++}}class le{constructor(t,e,n,i){var r;this.type=2,this._$AH=ne,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=n,this.options=i,this._$Cg=null===(r=null==i?void 0:i.isConnected)||void 0===r||r}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cg}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=ae(this,t,e),Jt(t)?t===ne||null==t||""===t?(this._$AH!==ne&&this._$AR(),this._$AH=ne):t!==this._$AH&&t!==ee&&this.$(t):void 0!==t._$litType$?this.T(t):void 0!==t.nodeType?this.k(t):(t=>{var e;return Wt(t)||"function"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.S(t):this.$(t)}M(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}k(t){this._$AH!==t&&(this._$AR(),this._$AH=this.M(t))}$(t){this._$AH!==ne&&Jt(this._$AH)?this._$AA.nextSibling.data=t:this.k(zt.createTextNode(t)),this._$AH=t}T(t){var e;const{values:n,_$litType$:i}=t,r="number"==typeof i?this._$AC(t):(void 0===i.el&&(i.el=se.createElement(i.h,this.options)),i);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.m(n);else{const t=new ce(r,this),e=t.p(this.options);t.m(n),this.k(e),this._$AH=t}}_$AC(t){let e=ie.get(t.strings);return void 0===e&&ie.set(t.strings,e=new se(t)),e}S(t){Wt(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let n,i=0;for(const r of t)i===e.length?e.push(n=new le(this.M(Ft()),this.M(Ft()),this,this.options)):n=e[i],n._$AI(r),i++;i<e.length&&(this._$AR(n&&n._$AB.nextSibling,i),e.length=i)}_$AR(t=this._$AA.nextSibling,e){var n;for(null===(n=this._$AP)||void 0===n||n.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cg=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class he{constructor(t,e,n,i,r){this.type=1,this._$AH=ne,this._$AN=void 0,this.element=t,this.name=e,this._$AM=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=ne}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,n,i){const r=this.strings;let o=!1;if(void 0===r)t=ae(this,t,e,0),o=!Jt(t)||t!==this._$AH&&t!==ee,o&&(this._$AH=t);else{const i=t;let s,a;for(t=r[0],s=0;s<r.length-1;s++)a=ae(this,i[n+s],e,s),a===ee&&(a=this._$AH[s]),o||(o=!Jt(a)||a!==this._$AH[s]),a===ne?t=ne:t!==ne&&(t+=(null!=a?a:"")+r[s+1]),this._$AH[s]=a}o&&!i&&this.C(t)}C(t){t===ne?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:"")}}class ue extends he{constructor(){super(...arguments),this.type=3}C(t){this.element[this.name]=t===ne?void 0:t}}const de=Vt?Vt.emptyScript:"";class fe extends he{constructor(){super(...arguments),this.type=4}C(t){t&&t!==ne?this.element.setAttribute(this.name,de):this.element.removeAttribute(this.name)}}class ve extends he{constructor(t,e,n,i,r){super(t,e,n,i,r),this.type=5}_$AI(t,e=this){var n;if((t=null!==(n=ae(this,t,e,0))&&void 0!==n?n:ne)===ee)return;const i=this._$AH,r=t===ne&&i!==ne||t.capture!==i.capture||t.once!==i.once||t.passive!==i.passive,o=t!==ne&&(i===ne||r);r&&this.element.removeEventListener(this.name,this,i),o&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,n;"function"==typeof this._$AH?this._$AH.call(null!==(n=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==n?n:this.element,t):this._$AH.handleEvent(t)}}class pe{constructor(t,e,n){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(t){ae(this,t)}}const ye=window.litHtmlPolyfillSupport;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var ge,me;null==ye||ye(se,le),(null!==(Ht=globalThis.litHtmlVersions)&&void 0!==Ht?Ht:globalThis.litHtmlVersions=[]).push("2.2.6");class _e extends Mt{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const n=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=n.firstChild),n}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,n)=>{var i,r;const o=null!==(i=null==n?void 0:n.renderBefore)&&void 0!==i?i:e;let s=o._$litPart$;if(void 0===s){const t=null!==(r=null==n?void 0:n.renderBefore)&&void 0!==r?r:null;o._$litPart$=s=new le(e.insertBefore(Ft(),t),t,void 0,null!=n?n:{})}return s._$AI(t),s})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return ee}}_e.finalized=!0,_e._$litElement$=!0,null===(ge=globalThis.litElementHydrateSupport)||void 0===ge||ge.call(globalThis,{LitElement:_e});const Se=globalThis.litElementPolyfillSupport;null==Se||Se({LitElement:_e}),(null!==(me=globalThis.litElementVersions)&&void 0!==me?me:globalThis.litElementVersions=[]).push("3.2.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const be=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(n){n.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(n){n.createProperty(e.key,t)}};
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var $e;null===($e=window.HTMLSlotElement)||void 0===$e||$e.prototype.assignedElements;class xe extends _e{constructor(){super(...arguments),this.state="foo"}render(){return te` <main> <h1>Artist Map</h1> <p>Current state = ${this.state}</p> </main> `}}xe.styles=((t,...e)=>{const n=1===t.length?t[0]:e.reduce(((e,n,i)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[i+1]),t[0]);return new Ot(n,t,At)})`:host{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;font-size:calc(10px + 2vmin);color:#1a2b42;max-width:960px;margin:0 auto;text-align:center;background-color:var(--artist-map-2-background-color)}main{flex-grow:1}`,function(t,e,n,i){var r,o=arguments.length,s=o<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(s=(o<3?r(s):o>3?r(e,n,s):r(e,n))||s);o>3&&s&&Object.defineProperty(e,n,s)}([function(t){return(e,n)=>void 0!==n?((t,e,n)=>{e.constructor.createProperty(n,t)})(t,e,n):be(t,e)}()],xe.prototype,"state",void 0);const we=await fetch("xstate/ArtistMap.json"),Ae=await we.json(),Ee=new xt(Ae,Oe);var Oe;console.log(Ee),customElements.define("artist-map-2",xe);
